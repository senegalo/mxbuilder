/*
 Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",icons:"button,checkbox,form,hiddenfield,imagebutton,radio,select,select-rtl,textarea,textarea-rtl,textfield",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+
CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(c){var b=c.lang,e=0,a=function(g,a,d){var f={};"form"==a&&(f.context="form");c.addCommand(a,new CKEDITOR.dialogCommand(a,f));c.ui.addButton&&c.ui.addButton(g,{label:b.common[g.charAt(0).toLowerCase()+g.slice(1)],command:a,toolbar:"forms,"+(e+=10)});CKEDITOR.dialog.add(a,d)},d=this.path+"dialogs/";
!c.blockless&&a("Form","form",d+"form.js");a("Checkbox","checkbox",d+"checkbox.js");a("Radio","radio",d+"radio.js");a("TextField","textfield",d+"textfield.js");a("Textarea","textarea",d+"textarea.js");a("Select","select",d+"select.js");a("Button","button",d+"button.js");var f=CKEDITOR.plugins.get("image");f&&a("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");a("HiddenField","hiddenfield",d+"hiddenfield.js");c.addMenuItems&&(a={checkbox:{label:b.forms.checkboxAndRadio.checkboxTitle,
command:"checkbox",group:"checkbox"},radio:{label:b.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:b.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:b.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},imagebutton:{label:b.image.titleButton,command:"imagebutton",group:"imagebutton"},button:{label:b.forms.button.title,command:"button",group:"button"},select:{label:b.forms.select.title,command:"select",group:"select"},textarea:{label:b.forms.textarea.title,
command:"textarea",group:"textarea"}},!c.blockless&&(a.form={label:b.forms.form.menu,command:"form",group:"form"}),c.addMenuItems(a));c.contextMenu&&(!c.blockless&&c.contextMenu.addListener(function(a,b,c){if((a=c.contains("form",1))&&!a.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),c.contextMenu.addListener(function(a){if(a&&!a.isReadOnly()){var b=a.getName();if(b=="select")return{select:CKEDITOR.TRISTATE_OFF};if(b=="textarea")return{textarea:CKEDITOR.TRISTATE_OFF};if(b=="input")switch(a.getAttribute("type")){case "button":case "submit":case "reset":return{button:CKEDITOR.TRISTATE_OFF};
case "checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case "radio":return{radio:CKEDITOR.TRISTATE_OFF};case "image":return f?{imagebutton:CKEDITOR.TRISTATE_OFF}:null;default:return{textfield:CKEDITOR.TRISTATE_OFF}}if(b=="img"&&a.data("cke-real-element-type")=="hiddenfield")return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));c.on("doubleclick",function(a){var b=a.data.element;if(!c.blockless&&b.is("form"))a.data.dialog="form";else if(b.is("select"))a.data.dialog="select";else if(b.is("textarea"))a.data.dialog=
"textarea";else if(b.is("img")&&b.data("cke-real-element-type")=="hiddenfield")a.data.dialog="hiddenfield";else if(b.is("input"))switch(b.getAttribute("type")){case "button":case "submit":case "reset":a.data.dialog="button";break;case "checkbox":a.data.dialog="checkbox";break;case "radio":a.data.dialog="radio";break;case "image":a.data.dialog="imagebutton";break;default:a.data.dialog="textfield"}})},afterInit:function(c){var b=c.dataProcessor,e=b&&b.htmlFilter,b=b&&b.dataFilter;CKEDITOR.env.ie&&e&&
e.addRules({elements:{input:function(a){var a=a.attributes,b=a.type;b||(a.type="text");("checkbox"==b||"radio"==b)&&"on"==a.value&&delete a.value}}});b&&b.addRules({elements:{input:function(a){if("hidden"==a.attributes.type)return c.createFakeParserElement(a,"cke_hidden","hiddenfield")}}})}});
CKEDITOR.env.ie&&(CKEDITOR.dom.element.prototype.hasAttribute=CKEDITOR.tools.override(CKEDITOR.dom.element.prototype.hasAttribute,function(c){return function(b){this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case "class":return 0<this.$.className.length;case "checked":return!!this.$.checked;case "value":var e=this.getAttribute("type");return"checkbox"==e||"radio"==e?"on"!=this.$.value:this.$.value}return c.apply(this,arguments)}}));